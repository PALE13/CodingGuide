## 应用层

#### **常见的应用层的协议**

- **HTTP (Hypertext Transfer Protocol)：**80，用于在Web浏览器和Web服务器之间传输超文本文档，支持客户端和服务器之间的通信。
- **HTTPS (Hypertext Transfer Protocol Secure)：**443，在HTTP的基础上加入了SSL/TLS协议，提供了加密和身份验证，用于安全的Web通信。
- **FTP (File Transfer Protocol)：**控制连接端口号：21，数据连接端口号：20，用于在客户端和服务器之间传输文件，支持上传和下载文件。
- **SMTP (Simple Mail Transfer Protocol)：**25，用于在邮件服务器之间传输电子邮件，负责发送邮件。
- **POP3 (Post Office Protocol version 3)：**110，用于从邮件服务器上获取电子邮件，负责接收邮件。
- **IMAP (Internet Message Access Protocol)：**143，也是用于获取电子邮件的协议，提供了更丰富的功能，如在邮件服务器上管理邮件。
- **DNS (Domain Name System)：**53，用于将域名解析为IP地址，负责进行域名到IP地址的映射。
- **DHCP (Dynamic Host Configuration Protocol)：**服务器端口号：67，客户端端口号：68，用于动态分配IP地址和其他网络配置信息，支持在网络上自动配置主机。
- **SNMP (Simple Network Management Protocol)：**161，用于网络管理，允许网络管理员监视和调整网络设备的性能。
- **Telnet：**23，用于在远程主机上执行命令，提供命令行接口。
- **SSH (Secure Shell)：**22，在Telnet的基础上加入了加密和认证，提供了安全的远程登录。
- **SMTPS (SMTP Secure)：**465，基于SMTP的安全版本，使用SSL或TLS协议进行加密和认证。
- **HTTP/2：**在HTTP的基础上进行了优化和改进，支持多路复用、头部压缩等特性，提高了性能。
- **WebSockets：**用于在Web浏览器和Web服务器之间建立持久的双向通信，支持实时数据传输。



#### **DHCP动态主机配置协议**

应用层协议，基于UDP，使用客服/服务器方式，用于给主机动态地分配IP地址而不需要手动配置。

客户端口号68，服务器端口号67

未取得IP地址时使用0.0.0.0

**步骤：**

①发现阶段：客户端广播DHCP发现报文，找到网络中的DHCP服务器。

②提供IP地址：DHCP服务器收到发现报文后，广播DHCP提供报文，其中包含IP地址和相关配置信息。

③请求IP地址分配：客户端收到DHCP提供报文后，广播DHCP请求报文向DHCP服务器请求使用该IP地址。

④确认分配：服务器收到请求报文后，广播DHCP确认报文，将IP地址正式分配给主机。





#### **DNS 域名系统**

因特网使用的命名系统，用于将域名转换为IP地址

使用UDP协议传输，端口号53

**层次域名空间**

根域名服务器：管理顶级域名（.com .org等服务器的地址）

顶级域名服务器：管理二级域名（拥有权限域名服务器地址）

权限域名服务器：管理某个区的域名，拥有IP地址与域名映射

本地域名服务器：高速缓存存放最近查询的域名到IP的映射

**DNS解析步骤**

**迭代与递归结合**

①客户向**本地域名服务器**发送DNS请求报文

②本地域名服务器查询本地缓存是否有域名和IP地址的映射，若有，则将IP地址返回给用户；若无，则向根域名服务器查询

③**根域名服务器**判断域名属于.com，将dns.com顶级域名服务器IP地址返回给本地域名服务器

④本地域名服务器向顶级域名服务器查询

⑤顶级域名服务器判断域名属于abc.com，将dns.abc.com权限域名服务器IP地址返回给本地域名服务器

⑥本地域名服务器向权限域名服务器查询

⑦权限域名服务器判断域名属于x.abc.com，将其映射的IP地址返回给本地域名服务器

⑧本地域名服务器将域名与IP地址的映射保存到高速缓存，然后返回给客户

<img src="https://palepics.oss-cn-guangzhou.aliyuncs.com/img/image-20240303235927542.png" alt="image-20240303235927542" style="zoom:67%;" />





#### **FTP 文件传输协议**

一种C/S协议，建立在TCP上，可靠的，面向连接的，用于异构网络中任意计算机之间传送文件的协议。提供交互式访问，允许客户指明文件的类型与格式，并允许文件具有存取权限。

**提供两个并行的TCP连接**

- 控制连接（端口21）：整个会话期间一直保持打开，用于传输FTP相关控制命令。

- 数据连接（端口20）：只在文件传输时建立连接，传输结束关闭，数据连接又分为主动模式和被动模式
  - 主动模式：FTP服务器用端口号20与客户临时端口建立数据连接
  - 被动模式：FTP服务器被动等待客户数据连接，使用随机的临时端口号

  





#### **SMTP简单邮件传输协议**

建立在TCP上的 ，C/S工作方式，可靠且有效的发送电子邮件的协议，端口号为25。

**传输过程**

发信人用UA，UA用SMTP发送邮件至发送方邮件服务器

发送方邮件服务器与接收方邮件服务器建立TCP连接，发送

接收方邮件服务器将邮件放入信箱

收信人用UA，UA用POP3协议从邮件服务器读取邮件

> UA：用户代理。用户与电子邮件系统的接口。Outlook，Foxmail



**POP3邮局协议版本3**

一种简单但功能有限的邮件读取协议，用户只能下载并删除或下载并保存的方式从邮件服务器下载邮件到用户计算机。基于TCP，C/S工作方式，端口号为110。

**IMAP 协议**

IMAP 协议是比 POP3 更新的协议，它在功能和性能上都更加强大。IMAP 支持邮件搜索、标记、分类、归档等高级功能，而且可以在多个设备之间同步邮件状态。几乎所有现代电子邮件客户端和服务器都支持 IMAP。





















