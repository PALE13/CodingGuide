## 计算机网络体系结构

**协议：**网络中对等实体之间的通信规则（水平）

协议的三要素

- 语法：规定传输的格式
- 语义：规定所要完成的功能
- 同步：规定操作的顺序

**服务：**下层为相邻的上层提供功能的调用。（垂直）

**接口（服务访问点SAP）：**上层使用下层服务的入口。



**SDU：**服务数据单元，完成用户所要求功能而传送的数据。

**PCI：**协议控制信息，控制协议操作的信息。

**PDU：**协议数据单元，对等实体之间传输的数据单位。

物理层 bit，数据链 frame，网络层 packet，传输层 segment，更高层 message. 



### **OSI模型（理论模型）**

开放式系统互联通信参考模型，一种概念模型，由国际标准化组织（ISO）提出的试图使各种计算机在世界范围内互连为网络的标准框架

包含：

1. 物理层(比特)：在物理媒体上透明地传输比特流
2. 数据链路层(帧）：将网络层传来的IP数据报封装成帧，差错控制，流量控制，介质访问控制
3. 网络层（数据报/ip分组 ）：点对点通信，把传输层产生的数据报封装成分组，选择合适路由将其从源端传到目的端，路由选择，差错控制，流量控制（控制发送方），拥塞控制（全局节点）
4. 传输层（TCP：报文段/UDP：用户数据报 ）：负责主机间进程间的通信，即端到端通信，流量控制，差错控制，复用分用（进程间根据端口号）
5. 会话层：管理通信双方的会话进程，提供建立，管理，终止会话，数据同步等服务。
6. 表示层：处理通信双方交换信息的表示方式，提供数据的格式变化、加密解密和压缩恢复等服务。
7. 应用层：对应用程序的通信提供服务，提供系统与用户的接口。

点到点：1-3 端到端：4-7

通信子网：1-3 资源子网：5-7

 <img src="https://palepics.oss-cn-guangzhou.aliyuncs.com/img/image-20240228224426680.png" alt="image-20240228224426680" style="zoom: 67%;" />

 





 

### **TCP/IP模型（事实标准）**

**TCP/IP**：传输控制协议/网际协议，一个能在多个网络实现传输的协议簇，包含了网络接口层，网际层，传输层，应用层的协议，是Internet最基本的协议。

- **网际接口层：**负责接受IP分组并发送到指定的物理网络上。
- **网际层：**点对点通信，把传输层产生的报文段或数据报封装成分组，选择合适路由将其从源端传到目的端，路由选择，差错控制，流量控制（控制发送方），拥塞控制（全局节点）
- **传输层：**负责主机间进程的通信，即端到端通信，流量控制，差错控制，复用分用（进程间根据端口号）

​    主要使用TCP和UDP协议。

- **应用层：**对应用程序的通信提供服务，提供系统与用户的接口。





### **TCP/IP和OSI参考模型之间的异同**

**同：**

1. 都采用了分层结构概念。
2. 都能实现面向连接通信和无连接通信两种服务。
3. 都能实现异构网络互连。

**异：**

1. OSI是理论模型，TCP/IP是事实标准。
2. OSI参考模型先于协议发明，具有通用性；TCP/IP是在现有协议集的基础上建立的，对非TCP/IP网络不适用，通用性较差。
3. OSI模型对服务、协议、接口有明确的定义
4. OSI在网络层支持无连接和面向连接通信，但在传输层仅有面向连接的通信；TCP/IP认为可靠性是端到端问题，仅在网际层提供无连接通信，而在传输层支持无连接和面向连接。





### **为什么网络要分层**

1. **各层之间相互独立**：各层之间相互独立，各层之间不需要关心其他层是如何实现的，只需要知道自己如何调用下层提供好的功能就可以了（可以简单理解为接口调用）**。这个和我们对开发时系统进行分层是一个道理。**
2. **提高了整体灵活性**：每一层都可以使用最适合的技术来实现，你只需要保证你提供的功能以及暴露的接口的规则没有改变就行了。**这个和我们平时开发系统的时候要求的高内聚、低耦合的原则也是可以对应上的。**
3. **大问题化小**：分层可以将复杂的网络问题分解为许多比较小的、界线比较清晰简单的小问题来处理和解决。这样使得复杂的计算机网络系统变得易于设计，实现和标准化。 **这个和我们平时开发的时候，一般会将系统功能分解，然后将复杂的问题分解为容易理解的更小的问题是相对应的，这些较小的问题具有更好的边界（目标和接口）定义。**





### **网络通信模型**

**客户/服务器（C/S）模型**

客户是服务请求方，服务器是服务提供方，服务器总是处于运行状态，并等待客户的服务请求。

应用：Web，FTP，远程登录和电子邮件

特点：

- 计算机地位不平等
- 客户机之间不直接通信
- 可扩展性不佳

**P2P模型：对等网络**

对等对方相互通信，每个对等方即是服务的请求者，又是服务的提供者

优点：

- 减轻服务器计算压力
- 降低成本
- 可扩展性好
- 网络健壮性强

缺点：

- 占用内存
- 网络拥塞

